{% extends "requestmeal/base.html" %}

{% block title %}
|| Welcome
{% endblock %}

{% block style %}
{% endblock %}

{% block stylesheets %}
{% endblock %}


{% block content %}
<link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/dashboard/">

<div class="p-4 p-md-5 mb-4 text-bg-dark" style='border-bottom-right-radius:5px; border-bottom-left-radius:5px;'>
  <div class="col-md-6 px-0">
    <h1 class="display-4 fst-italic">Share a Swipe! Manager</h1>
    <p class="lead my-3">
      Manage student program enrollment, assign donation allowances, and view
      data analyses and program statistics.
    </p>
  </div>
</div>

<div class="container-fluid">


  <div class="row">
    <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
      <div class="position-sticky pt-3 sidebar-sticky">
        <ul class="nav flex-column">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="{% url 'meal-adminpage'%}">
              <span data-feather="home" class="align-text-bottom"></span>
              Dashboard
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'meal-requestlist'%}">
              <span data-feather="file" class="align-text-bottom"></span>
              <!-- fill in with jinja count of number of requests-->
              Requests
              <span class="badge bg-danger rounded-pill">{{ num }}</span>

            </a>
          </li>
          <!-- <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="shopping-cart" class="align-text-bottom"></span>
              Products
            </a>
          </li> -->
          <li class="nav-item">
            <a class="nav-link" href="{% url 'meal-studentlist'%}">
              <span data-feather="users" class="align-text-bottom"></span>
              Students
            </a>
          </li>

          <li class="nav-item">
            <a class="nav-link" href="{% url 'meal-adminaccept'%}">
              <span data-feather="bar-chart-2" class="align-text-bottom"></span>
              Allocate Donations
            </a>
          </li>


          <!-- <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="bar-chart-2" class="align-text-bottom"></span>
              Reports
            </a>
          </li> -->
          <!-- <li class="nav-item">
            <a class="nav-link" href="#">
              <span data-feather="layers" class="align-text-bottom"></span>
              Integrations
            </a>
          </li> -->
        </ul>

        <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
          <span>Saved reports</span>
          <!-- <a class="link-secondary" href="#" aria-label="Add a new report">
            <span data-feather="plus-circle" class="align-text-bottom"></span>
          </a> -->
        </h6>
        <ul class="nav flex-column mb-2">
          <li class="nav-item">
            <a class="nav-link" download href="../../static/requestmeal/reports/current_semester_bank.csv">
              <span data-feather="file-text" class="align-text-bottom"></span>
              Current semester bank
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" download href="../../static/requestmeal/reports/Semesterly_Donation_History.pdf">
              <span data-feather="file-text" class="align-text-bottom"></span>
              Semesterly donation history
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Program Overview Dashboard</h1>
        <div class="btn-toolbar mb-2 mb-md-0">
          <!-- <div class="btn-group me-2">
            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
          </div> -->

          <!-- <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
            <span data-feather="calendar" class="align-text-bottom"></span>
            This week
          </button> -->
        </div>
      </div>

      <canvas class="my-4 w-100" id="myChart" width="900" height="380"></canvas>

      <h2>Program History Statistics</h2>
      <!-- fill in with template database data -->
      <div class="table-responsive">
        <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">Semester</th>
              <th scope="col">Students Applied</th>
              <th scope="col">Students Enrolled</th>
              <th scope="col">Meal Swipes Donated</th>
              <th scope="col">Meal Swipes Redeemed</th>
              <th scope="col">Dining Dollars Donated</th>
              <th scope="col">Dining Dollars Redeemed</th>
            </tr>
          </thead>

          <!-- 'Fall 2022',
          'Spring 2023',
          'Fall 2023',
          'Spring 2024',
          'Fall 2024',
          'Spring 2025',
          'Fall 2025' -->
          <tbody>
            <tr>
                <td>{{ data.4.semester }}</td>
                <td>1,034</td>
                <td>509</td>
                <td>{{ data.4.MSP }}</td>
                <td>{{ data.4.MSU }}</td>
                <td>${{ data.4.DDP }}</td>
                <td>${{ data.4.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.3.semester }}</td>
                <td>4,876</td>
                <td>3,133</td>
                <td>{{ data.3.MSP }}</td>
                <td>{{ data.3.MSU }}</td>
                <td>${{ data.3.DDP }}</td>
                <td>${{ data.3.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.2.semester }}</td>
                <td>10,099</td>
                <td>8,333</td>
                <td>{{ data.2.MSP }}</td>
                <td>{{ data.2.MSU }}</td>
                <td>${{ data.2.DDP }}</td>
                <td>${{ data.2.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.1.semester }}</td>
                <td>11,114</td>
                <td>9,008</td>
                <td>{{ data.1.MSP }}</td>
                <td>{{ data.1.MSU }}</td>
                <td>${{ data.1.DDP }}</td>
                <td>${{ data.1.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.6.semester }}</td>
                <td>13,217</td>
                <td>8,085</td>
                <td>{{ data.6.MSP }}</td>
                <td>{{ data.6.MSU }}</td>
                <td>${{ data.6.DDP }}</td>
                <td>${{ data.6.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.0.semester }}</td>
                <td>19,099</td>
                <td>8,333</td>
                <td>{{ data.0.MSP }}</td>
                <td>{{ data.0.MSU }}</td>
                <td>${{ data.0.DDP }}</td>
                <td>${{ data.0.DDU }}</td>
            </tr>
            <tr>
                <td>{{ data.5.semester }}</td>
                <td>11,012</td>
                <td>9,008</td>
                <td>{{ data.5.MSP }}</td>
                <td>{{ data.5.MSU }}</td>
                <td>${{ data.5.DDP }}</td>
                <td>${{ data.5.DDU }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </main>
  </div>
</div>


    <script src="../static/js/bootstrap.bundle.min.js"></script>
    <!-- <script src="../static/js/dashboard.js"></script> -->

    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
    <script src="../static/js/dashboard.js"></script>
    <script>
      (() => {
      'use strict'

      feather.replace({ 'aria-hidden': 'true' })

      // Graphs
      const ctx = document.getElementById('myChart')
      // eslint-disable-next-line no-unused-vars
      const myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [
            'Fall 2022',
            'Spring 2023',
            'Fall 2023',
            'Spring 2024',
            'Fall 2024',
            'Spring 2025',
            'Fall 2025'
          ],
          datasets: [{
            data: [
              15339,
              21345,
              18483,
              24003,
              23489,
              24092,
              12034
            ],
            lineTension: 0,
            backgroundColor: 'transparent',
            borderColor: '#007bff',
            borderWidth: 4,
            pointBackgroundColor: '#007bff'
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: false
              }
            }]
          },
          legend: {
            display: false
          }
        }
      })
    })()
    </script>
{% endblock %}
